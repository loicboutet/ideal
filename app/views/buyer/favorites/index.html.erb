<% content_for :title, "Mes Favoris - Repreneur - Id√©al Reprise" %>

<div class="max-w-7xl mx-auto space-y-6">
  <div class="flex items-center justify-between">
    <div>
      <h2 class="text-2xl font-bold text-gray-900">Mes Favoris</h2>
      <p class="text-gray-600 mt-1">
        <%= @buyer_profile.favorites.count %> annonce<%= @buyer_profile.favorites.count > 1 ? 's' : '' %> sauvegard√©e<%= @buyer_profile.favorites.count > 1 ? 's' : '' %>
      </p>
    </div>
    <%= link_to buyer_listings_path, class: "px-6 py-3 bg-buyer-600 text-white rounded-full hover:bg-buyer-700 transition font-medium" do %>
      + Parcourir les annonces
    <% end %>
  </div>

  <% if @buyer_profile.favorites.any? %>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <% @buyer_profile.favorites.includes(listing: :seller_profile).each do |favorite| %>
        <% listing = favorite.listing %>
        <% if listing.present? %>
          <%= render 'buyer/listings/listing_card', listing: listing, exclusive: false %>
        <% end %>
      <% end %>
    </div>
  <% else %>
    <div class="bg-white rounded-xl shadow-sm p-12 text-center">
      <div class="text-6xl mb-4">‚ù§Ô∏è</div>
      <h3 class="text-xl font-bold text-gray-900 mb-2">Aucun favori pour le moment</h3>
      <p class="text-gray-600 mb-6 max-w-md mx-auto">
        Parcourez les annonces et cliquez sur le c≈ìur pour ajouter vos opportunit√©s pr√©f√©r√©es √† vos favoris.
      </p>
      <%= link_to buyer_listings_path, class: "inline-block px-6 py-3 bg-buyer-600 text-white rounded-full hover:bg-buyer-700 transition font-medium" do %>
        Parcourir les annonces
      <% end %>
    </div>
  <% end %>

  <!-- Note about CRM -->
  <% if @buyer_profile.favorites.any? %>
    <div class="bg-buyer-50 border border-buyer-200 rounded-xl p-6">
      <div class="flex items-start gap-3">
        <svg class="w-6 h-6 text-buyer-600 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <div>
          <h3 class="font-bold text-buyer-900 mb-2">üí° Astuce</h3>
          <p class="text-buyer-800">
            Lorsque vous ajoutez une annonce √† vos favoris, elle est automatiquement ajout√©e √† votre 
            <%= link_to "pipeline CRM", buyer_pipeline_path, class: "underline font-medium hover:text-buyer-600" %> 
            dans l'√©tape "Favoris√©e". Vous pouvez ensuite la faire progresser √† travers les diff√©rentes √©tapes de votre processus d'acquisition.
          </p>
        </div>
      </div>
    </div>
  <% end %>
</div>
