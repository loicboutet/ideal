<% content_for :title, "Messages & Enquêtes - Administration - Idéal Reprise" %>

<div class="space-y-6">
  <!-- Page Header -->
  <div>
    <h1 class="text-2xl sm:text-3xl font-bold text-gray-900">Messages & Enquêtes</h1>
    <p class="text-gray-600 mt-1">Envoyer des messages ou des questionnaires aux utilisateurs</p>
  </div>

  <!-- Tabs -->
  <div class="border-b border-gray-200">
    <nav class="-mb-px flex space-x-8">
      <button class="border-b-2 border-admin-500 py-4 px-1 text-sm font-medium text-admin-600">
        Messages directs
      </button>
      <button class="border-b-2 border-transparent py-4 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300">
        Enquêtes de satisfaction
      </button>
      <button class="border-b-2 border-transparent py-4 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300">
        Questionnaires développement
      </button>
    </nav>
  </div>

  <!-- Envoyer un message -->
  <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
    <h2 class="text-lg font-bold text-gray-900 mb-6">Envoyer un message</h2>
    
    <form class="space-y-6">
      <!-- Destinataires -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Destinataires</label>
        <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-admin-500">
          <option>Tous les utilisateurs</option>
          <option>Tous les cédants</option>
          <option>Tous les repreneurs</option>
          <option>Tous les partenaires</option>
          <option>Repreneurs avec abonnement actif</option>
          <option>Utilisateurs inactifs (30+ jours)</option>
          <option>Utilisateur spécifique...</option>
        </select>
      </div>

      <!-- Sujet -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Sujet</label>
        <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-admin-500" placeholder="Sujet du message">
      </div>

      <!-- Message -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Message</label>
        <textarea rows="6" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-admin-500" placeholder="Rédigez votre message..."></textarea>
      </div>

      <!-- Options -->
      <div class="space-y-3">
        <label class="flex items-center gap-2">
          <input type="checkbox" class="rounded border-gray-300 text-admin-600 focus:ring-admin-500">
          <span class="text-sm text-gray-700">Afficher sur le dashboard utilisateur</span>
        </label>
        <label class="flex items-center gap-2">
          <input type="checkbox" checked class="rounded border-gray-300 text-admin-600 focus:ring-admin-500">
          <span class="text-sm text-gray-700">Envoyer par email</span>
        </label>
      </div>

      <!-- Actions -->
      <div class="flex justify-end gap-3">
        <button type="button" class="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition">
          Annuler
        </button>
        <button type="submit" class="px-6 py-2 bg-admin-600 text-white rounded-lg hover:bg-admin-700 transition">
          Envoyer le message
        </button>
      </div>
    </form>
  </div>

  <!-- Messages récents -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-200">
    <div class="p-6 border-b border-gray-200">
      <h2 class="text-lg font-bold text-gray-900">Messages récents envoyés</h2>
    </div>
    <div class="divide-y divide-gray-200">
      <div class="p-4 hover:bg-gray-50">
        <div class="flex items-start justify-between">
          <div class="flex-1">
            <div class="font-medium text-gray-900">Nouvelle fonctionnalité disponible</div>
            <div class="text-sm text-gray-600 mt-1">À: Tous les repreneurs • Il y a 2 jours</div>
          </div>
          <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">Envoyé</span>
        </div>
      </div>
      <div class="p-4 hover:bg-gray-50">
        <div class="flex items-start justify-between">
          <div class="flex-1">
            <div class="font-medium text-gray-900">Maintenance programmée</div>
            <div class="text-sm text-gray-600 mt-1">À: Tous les utilisateurs • Il y a 5 jours</div>
          </div>
          <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">Envoyé</span>
        </div>
      </div>
    </div>
  </div>
</div>
