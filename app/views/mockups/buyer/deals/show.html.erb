<% content_for :title, "Détail du dossier - Repreneur - Idéal Reprise" %>
<% content_for :page_title, "Détail du dossier" %>

<div class="max-w-4xl mx-auto space-y-6">
  <%= link_to mockups_buyer_pipeline_path, class: "inline-flex items-center gap-2 text-gray-600 hover:text-gray-900" do %>
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
    </svg>
    Retour au pipeline
  <% end %>

  <!--Header with name and stars -->
  <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
    <div class="flex items-start justify-between mb-4">
      <div class="flex-1">
        <div class="flex items-center gap-3 mb-2">
          <h1 class="text-2xl font-bold text-gray-900">L'Amie dorée - Boulangerie Paris 11e</h1>
          <span class="px-3 py-1 rounded-full text-sm font-medium bg-buyer-100 text-buyer-800">
            À contacter
          </span>
        </div>
        <p class="text-gray-600 mb-3">Paris (75) • Commerce & Distribution • Deal Direct</p>
        
        <!-- Étoiles scorecard -->
        <div class="flex items-center gap-2">
          <% 4.times do %>
            <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
            </svg>
          <% end %>
          <svg class="w-5 h-5 text-gray-300" fill="currentColor" viewBox="0 0 20 20">
            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
          </svg>
          <span class="text-sm text-gray-600 ml-2">Score Scorecard: 4/5</span>
        </div>
      </div>
      
      <!-- Complétude -->
      <div class="text-right">
        <div class="text-sm text-gray-600 mb-1">Complétude</div>
        <div class="text-3xl font-bold text-green-600">90%</div>
      </div>
    </div>

    <!-- Timer Info -->
    <div class="bg-orange-50 border border-orange-200 rounded-lg p-4">
      <div class="flex items-start gap-3">
        <svg class="w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <div class="flex-1">
          <div class="font-medium text-orange-900 mb-1">⏱ Information sur la réservation</div>
          <p class="text-sm text-orange-800">Réservé le 18/01/2025 • Expire le 25/01/2025</p>
          <div class="mt-2">
            <div class="flex items-center justify-between mb-1">
              <span class="text-xs text-orange-700">Temps restant</span>
              <span class="text-xs font-semibold text-orange-900">5 jours</span>
            </div>
            <div class="w-full bg-orange-200 rounded-full h-2">
              <div class="bg-orange-500 h-2 rounded-full" style="width: 71%"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Notes & Évaluation Section -->
  <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-lg font-bold text-gray-900">Mes notes et évaluation</h2>
      <button class="text-sm text-buyer-600 hover:text-buyer-700 font-medium">
        Modifier
      </button>
    </div>
    
    <!-- Rating Stars -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700 mb-2">Ma notation personnelle</label>
      <div class="flex items-center gap-2">
        <% 5.times do |i| %>
          <button class="<%= i < 3 ? 'text-buyer-500' : 'text-gray-300' %> hover:text-buyer-600 transition">
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
            </svg>
          </button>
        <% end %>
        <span class="text-sm text-gray-600 ml-2">(3/5)</span>
      </div>
    </div>

    <!-- Notes -->
    <div class="space-y-3">
      <div class="border-l-4 border-buyer-500 bg-gray-50 p-4 rounded-r-lg">
        <div class="flex items-start justify-between mb-2">
          <div class="text-sm font-medium text-gray-900">Note du 18/01/2025 à 14:30</div>
          <button class="text-gray-400 hover:text-gray-600">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
            </svg>
          </button>
        </div>
        <p class="text-sm text-gray-700">
          Excellente opportunité, bonne localisation. Besoin de vérifier les comptes en détail. Rendez-vous prévu la semaine prochaine avec le cédant.
        </p>
      </div>

      <button class="w-full px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-buyer-400 hover:text-buyer-600 transition">
        + Ajouter une note
      </button>
    </div>
  </div>

  <!-- Key Metrics -->
  <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
    <h2 class="text-lg font-bold text-gray-900 mb-4">Chiffres clés</h2>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <div class="bg-gray-50 rounded-lg p-4">
        <div class="text-sm text-gray-600 mb-1">CA annuel</div>
        <div class="text-xl font-bold text-gray-900">450k €</div>
      </div>
      <div class="bg-gray-50 rounded-lg p-4">
        <div class="text-sm text-gray-600 mb-1">Effectif</div>
        <div class="text-xl font-bold text-gray-900">5</div>
      </div>
      <div class="bg-gray-50 rounded-lg p-4">
        <div class="text-sm text-gray-600 mb-1">Prix</div>
        <div class="text-xl font-bold text-buyer-600">350k €</div>
      </div>
      <div class="bg-gray-50 rounded-lg p-4">
        <div class="text-sm text-gray-600 mb-1">Résultat Net</div>
        <div class="text-xl font-bold text-gray-900">85k €</div>
      </div>
    </div>
  </div>

  <!-- Informations détaillées de l'annonce -->
  <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
    <h2 class="text-lg font-bold text-gray-900 mb-4">Informations détaillées</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <div class="text-sm text-gray-600">Secteur</div>
        <div class="font-medium text-gray-900">Commerce & Distribution</div>
      </div>
      <div>
        <div class="text-sm text-gray-600">Forme juridique</div>
        <div class="font-medium text-gray-900">SARL</div>
      </div>
      <div>
        <div class="text-sm text-gray-600">Horizon transmission</div>
        <div class="font-medium text-gray-900">6-12 mois</div>
      </div>
      <div>
        <div class="text-sm text-gray-600">Type transmission</div>
        <div class="font-medium text-gray-900">Fond de commerce</div>
      </div>
      <div>
        <div class="text-sm text-gray-600">Ancienneté</div>
        <div class="font-medium text-gray-900">12 ans</div>
      </div>
      <div>
        <div class="text-sm text-gray-600">Clientèle</div>
        <div class="font-medium text-gray-900">B2C</div>
      </div>
    </div>
  </div>

  <!-- Description de l'annonce -->
  <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
    <h2 class="text-lg font-bold text-gray-900 mb-4">Description</h2>
    <p class="text-gray-700 leading-relaxed">
      Boulangerie artisanale située dans un quartier résidentiel dynamique. Clientèle fidèle établie. Production sur place de pain et viennoiseries de qualité. Emplacement stratégique avec fort passage piéton. Équipements récents en bon état. Bail commercial sécurisé avec loyer modéré.
    </p>
  </div>

  <!-- Contact Details -->
  <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
    <h2 class="text-lg font-bold text-gray-900 mb-4">Informations de contact</h2>
    <div class="space-y-3">
      <div class="flex items-center gap-3">
        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
        </svg>
        <span class="text-gray-900">jean.dupont@example.fr</span>
      </div>
      <div class="flex items-center gap-3">
        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
        </svg>
        <span class="text-gray-900">06 12 34 56 78</span>
      </div>
    </div>
  </div>

  <!-- Historique des actions -->
  <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
    <h2 class="text-lg font-bold text-gray-900 mb-4">Historique des actions</h2>
    <div class="space-y-4">
      <div class="flex gap-3">
        <div class="w-2 h-2 bg-buyer-600 rounded-full mt-2"></div>
        <div class="flex-1">
          <div class="flex items-center justify-between">
            <p class="text-sm font-medium text-gray-900">Passé à "À contacter"</p>
            <span class="text-xs text-gray-500">18/01/2025 14:30</span>
          </div>
        </div>
      </div>
      <div class="flex gap-3">
        <div class="w-2 h-2 bg-green-600 rounded-full mt-2"></div>
        <div class="flex-1">
          <div class="flex items-center justify-between">
            <p class="text-sm font-medium text-gray-900">Annonce réservée</p>
            <span class="text-xs text-gray-500">18/01/2025 10:15</span>
          </div>
        </div>
      </div>
      <div class="flex gap-3">
        <div class="w-2 h-2 bg-orange-600 rounded-full mt-2"></div>
        <div class="flex-1">
          <div class="flex items-center justify-between">
            <p class="text-sm font-medium text-gray-900">NDA signé</p>
            <span class="text-xs text-gray-500">18/01/2025 10:12</span>
          </div>
        </div>
      </div>
      <div class="flex gap-3">
        <div class="w-2 h-2 bg-purple-600 rounded-full mt-2"></div>
        <div class="flex-1">
          <div class="flex items-center justify-between">
            <p class="text-sm font-medium text-gray-900">Mis en favoris</p>
            <span class="text-xs text-gray-500">15/01/2025 16:45</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Documents chargés -->
  <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
    <h2 class="text-lg font-bold text-gray-900 mb-4">Documents</h2>
    <div class="space-y-2">
      <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
        <div class="flex items-center gap-3">
          <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
          </svg>
          <div>
            <div class="text-sm font-medium text-gray-900">Bilan N-1</div>
            <div class="text-xs text-gray-500">Ajouté par le cédant</div>
          </div>
        </div>
        <button class="text-buyer-600 hover:text-buyer-700 text-sm">Télécharger</button>
      </div>
      <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
        <div class="flex items-center gap-3">
          <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
          </svg>
          <div>
            <div class="text-sm font-medium text-gray-900">Compte de résultat</div>
            <div class="text-xs text-gray-500">Ajouté par le cédant</div>
          </div>
        </div>
        <button class="text-buyer-600 hover:text-buyer-700 text-sm">Télécharger</button>
      </div>
    </div>
  </div>

  <!-- Actions rapides -->
  <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
    <h2 class="text-lg font-bold text-gray-900 mb-4">Actions rapides</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
      <%= link_to mockups_messages_path, class: "flex items-center justify-center gap-2 px-4 py-3 bg-buyer-600 text-white rounded-lg hover:bg-buyer-700 transition" do %>
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
        </svg>
        Envoyer un message
      <% end %>
      
      <button class="flex items-center justify-center gap-2 px-4 py-3 border border-green-600 text-green-600 rounded-lg hover:bg-green-50 transition">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
        </svg>
        Ajouter documents (+1 crédit)
      </button>
      
      <%= link_to release_mockups_buyer_reservation_path(1), class: "flex items-center justify-center gap-2 px-4 py-3 border border-orange-600 text-orange-600 rounded-lg hover:bg-orange-50 transition sm:col-span-2" do %>
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        Libérer l'annonce (+1 Crédit)
      <% end %>
    </div>
  </div>
</div>
