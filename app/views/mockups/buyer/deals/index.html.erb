<% content_for :title, "Mes dossiers - Repreneur - IdÃ©al Reprise" %>
<% content_for :page_title, "Mes dossiers" %>

<div class="max-w-7xl mx-auto space-y-6">
  <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
    <p class="text-gray-600">12 dossiers actifs</p>
    <div class="flex gap-3">
      <%= link_to mockups_buyer_pipeline_path, class: "px-4 py-2 border border-gray-300 text-gray-700 rounded-full hover:bg-gray-50 transition font-medium" do %>
        ðŸ“Š Vue pipeline
      <% end %>
      <%= link_to new_mockups_buyer_deal_path, class: "px-6 py-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition font-medium" do %>
        + Nouveau dossier
      <% end %>
    </div>
  </div>

  <!-- Filters -->
  <div class="bg-white rounded-xl shadow-sm p-6">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <select class="px-4 py-2 border border-gray-300 rounded-lg">
        <option>Tous les statuts</option>
        <option>Ã€ contacter</option>
        <option>En relation</option>
        <option>Ã‰tude en cours</option>
        <option>NÃ©gociation</option>
      </select>
      <select class="px-4 py-2 border border-gray-300 rounded-lg">
        <option>Toutes les dates</option>
        <option>Cette semaine</option>
        <option>Ce mois</option>
        <option>Ce trimestre</option>
      </select>
      <select class="px-4 py-2 border border-gray-300 rounded-lg">
        <option>Trier par: Plus rÃ©cent</option>
        <option>Trier par: Statut</option>
        <option>Trier par: CA</option>
      </select>
    </div>
  </div>

  <!-- Deals List -->
  <div class="space-y-4">
    <% [
      { id: 1, name: 'Boulangerie Paris 15Ã¨me', ca: '450kâ‚¬', status: 'Ã€ contacter', status_color: 'blue', date: '15/10/2025', notes: 3 },
      { id: 2, name: 'Restaurant Italien Lyon', ca: '420kâ‚¬', status: 'En relation', status_color: 'yellow', date: '14/10/2025', notes: 5 },
      { id: 3, name: 'Garage Toulouse', ca: '280kâ‚¬', status: 'Ã‰tude en cours', status_color: 'purple', date: '12/10/2025', notes: 8 },
      { id: 4, name: 'Salon Bordeaux', ca: '180kâ‚¬', status: 'NÃ©gociation', status_color: 'green', date: '10/10/2025', notes: 12 }
    ].each do |deal| %>
      <div class="bg-white rounded-xl shadow-sm p-6 hover:shadow-md transition">
        <div class="flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4">
          <div class="flex-1">
            <div class="flex items-center gap-3 mb-2">
              <h3 class="font-bold text-gray-900"><%= deal[:name] %></h3>
              <% case deal[:status] %>
              <% when 'Ã€ contacter' %>
                <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                  <%= deal[:status] %>
                </span>
              <% when 'En relation' %>
                <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                  <%= deal[:status] %>
                </span>
              <% when 'Ã‰tude en cours' %>
                <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                  <%= deal[:status] %>
                </span>
              <% when 'NÃ©gociation' %>
                <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                  <%= deal[:status] %>
                </span>
              <% end %>
            </div>
            <div class="flex flex-wrap items-center gap-4 text-sm text-gray-600">
              <span>CA: <%= deal[:ca] %></span>
              <span>â€¢ AjoutÃ© le <%= deal[:date] %></span>
              <span>â€¢ <%= deal[:notes] %> notes</span>
            </div>
          </div>
          <div class="flex gap-2">
            <%= link_to mockups_buyer_deal_path(deal[:id]), class: "px-4 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition font-medium text-sm" do %>
              Voir
            <% end %>
            <%= link_to edit_mockups_buyer_deal_path(deal[:id]), class: "px-4 py-2 border border-gray-300 text-gray-700 rounded-full hover:bg-gray-50 transition font-medium text-sm" do %>
              Modifier
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
