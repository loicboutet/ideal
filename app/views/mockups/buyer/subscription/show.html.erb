<% content_for :title, "Mon abonnement - Repreneur - Idéal Reprise" %>
<% content_for :page_title, "Mon abonnement" %>

<div class="max-w-6xl mx-auto space-y-6">
  <!-- Current Subscription -->
  <div class="bg-gradient-to-r from-green-500 to-teal-600 rounded-xl shadow-lg p-6 text-white">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-green-100 mb-2">Votre abonnement</p>
        <div class="text-3xl font-bold mb-2">Premium - 249€/mois</div>
        <p class="text-green-100">Actif jusqu'au 15/12/2025</p>
      </div>
      <div class="text-right">
        <div class="text-4xl font-bold">✓</div>
        <p class="text-sm text-green-100 mt-2">Abonnement actif</p>
      </div>
    </div>
  </div>

  <!-- Comparison Table -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
    <div class="p-6 border-b border-gray-200">
      <h2 class="text-xl font-bold text-gray-900">Comparez les offres</h2>
      <p class="text-gray-600 mt-1">Choisissez la formule adaptée à vos besoins</p>
    </div>

    <div class="overflow-x-auto">
      <table class="w-full">
        <thead>
          <tr class="border-b border-gray-200">
            <th class="p-4 text-left text-sm font-semibold text-gray-900">Fonctionnalités</th>
            <th class="p-4 text-center bg-gray-50">
              <div class="font-bold text-gray-900">Free</div>
              <div class="text-sm text-gray-600 mt-1">0€</div>
            </th>
            <th class="p-4 text-center">
              <div class="font-bold text-gray-900">Starter</div>
              <div class="text-sm text-gray-600 mt-1">89€/mois</div>
            </th>
            <th class="p-4 text-center bg-blue-50">
              <div class="font-bold text-blue-900">Premium</div>
              <div class="text-sm text-blue-700 mt-1">249€/mois</div>
              <div class="inline-block mt-1 px-2 py-0.5 bg-blue-600 text-white text-xs rounded-full">Actuel</div>
            </th>
            <th class="p-4 text-center bg-purple-50">
              <div class="font-bold text-purple-900">Club</div>
              <div class="text-sm text-purple-700 mt-1">1200€/an</div>
            </th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          <tr>
            <td class="p-4 text-sm text-gray-700">Accès annonces</td>
            <td class="p-4 text-center text-gray-500">Limité</td>
            <td class="p-4 text-center">✓</td>
            <td class="p-4 text-center bg-blue-50">✓</td>
            <td class="p-4 text-center bg-purple-50">✓</td>
          </tr>
          <tr>
            <td class="p-4 text-sm text-gray-700">Réservations simultanées</td>
            <td class="p-4 text-center text-gray-500">0</td>
            <td class="p-4 text-center">3</td>
            <td class="p-4 text-center bg-blue-50 font-medium">Illimité</td>
            <td class="p-4 text-center bg-purple-50 font-medium">Illimité</td>
          </tr>
          <tr>
            <td class="p-4 text-sm text-gray-700">Durée timer</td>
            <td class="p-4 text-center text-gray-500">-</td>
            <td class="p-4 text-center">10 jours</td>
            <td class="p-4 text-center bg-blue-50">2 mois</td>
            <td class="p-4 text-center bg-purple-50">2 mois</td>
          </tr>
          <tr>
            <td class="p-4 text-sm text-gray-700">Pipeline CRM</td>
            <td class="p-4 text-center text-gray-500">-</td>
            <td class="p-4 text-center">✓</td>
            <td class="p-4 text-center bg-blue-50">✓</td>
            <td class="p-4 text-center bg-purple-50">✓</td>
          </tr>
          <tr>
            <td class="p-4 text-sm text-gray-700">Enrichissement annonces</td>
            <td class="p-4 text-center text-gray-500">-</td>
            <td class="p-4 text-center">✓</td>
            <td class="p-4 text-center bg-blue-50">✓</td>
            <td class="p-4 text-center bg-purple-50">✓</td>
          </tr>
          <tr>
            <td class="p-4 text-sm text-gray-700">Crédits inclus/mois</td>
            <td class="p-4 text-center text-gray-500">0</td>
            <td class="p-4 text-center">5</td>
            <td class="p-4 text-center bg-blue-50 font-medium">15</td>
            <td class="p-4 text-center bg-purple-50 font-medium">30</td>
          </tr>
          <tr>
            <td class="p-4 text-sm text-gray-700">Repreneur vérifié (audit 30min)</td>
            <td class="p-4 text-center text-gray-500">-</td>
            <td class="p-4 text-center">-</td>
            <td class="p-4 text-center bg-blue-50">✓</td>
            <td class="p-4 text-center bg-purple-50">✓</td>
          </tr>
          <tr>
            <td class="p-4 text-sm text-gray-700">Annuaire partenaires</td>
            <td class="p-4 text-center text-gray-500">-</td>
            <td class="p-4 text-center">Payant</td>
            <td class="p-4 text-center bg-blue-50 font-medium">Gratuit</td>
            <td class="p-4 text-center bg-purple-50 font-medium">Gratuit</td>
          </tr>
          <tr>
            <td class="p-4 text-sm text-gray-700">Support prioritaire</td>
            <td class="p-4 text-center text-gray-500">-</td>
            <td class="p-4 text-center">-</td>
            <td class="p-4 text-center bg-blue-50">✓</td>
            <td class="p-4 text-center bg-purple-50">✓</td>
          </tr>
          <tr>
            <td class="p-4 text-sm text-gray-700">Coaching inclus</td>
            <td class="p-4 text-center text-gray-500">-</td>
            <td class="p-4 text-center">-</td>
            <td class="p-4 text-center bg-blue-50">-</td>
            <td class="p-4 text-center bg-purple-50 font-medium">1h/mois</td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <div class="p-6 bg-gray-50 border-t border-gray-200 text-center">
      <%= link_to upgrade_mockups_buyer_subscription_path, class: "inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium" do %>
        Changer d'offre
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
        </svg>
      <% end %>
    </div>
  </div>

  <!-- Transaction History APRÈS tarification -->
  <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
    <h3 class="text-lg font-bold text-gray-900 mb-4">Historique des transactions</h3>
    <div class="space-y-3">
      <% [
        {date: '20/01/2025', desc: 'Libération annonce + docs', amount: 3, color: 'green'},
        {date: '18/01/2025', desc: 'Contact partenaire', amount: -1, color: 'red'},
        {date: '15/01/2025', desc: 'Enrichissement validé', amount: 2, color: 'green'},
        {date: '10/01/2025', desc: 'Achat pack 25', amount: 25, color: 'blue'},
        {date: '05/01/2025', desc: 'Bonus inscription', amount: 10, color: 'green'}
      ].each do |tx| %>
        <div class="flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg border-b border-gray-100">
          <div>
            <div class="font-medium text-gray-900 text-sm"><%= tx[:desc] %></div>
            <div class="text-xs text-gray-500"><%= tx[:date] %></div>
          </div>
          <div class="font-bold text-<%= tx[:color] %>-600">
            <%= tx[:amount] > 0 ? '+' : '' %><%= tx[:amount] %>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Actions -->
  <div class="flex gap-3">
    <%= link_to cancel_mockups_buyer_subscription_path, class: "px-6 py-3 border border-red-600 text-red-600 rounded-lg hover:bg-red-50 transition font-medium" do %>
      Annuler l'abonnement
    <% end %>
  </div>
</div>
